define([],function(){var e,t,n,i,o,s,d,r,a=!1,c=function(){o=document.body.scrollHeight/document.body.scrollWidth,s=document.body.scrollWidth,d=0},l=function(){e&&(document.getElementById("js-mobile-tagcloud").innerHTML=e.innerHTML),t&&(document.getElementById("js-mobile-aboutme").innerHTML=t.innerHTML),n&&(document.getElementById("js-mobile-friends").innerHTML=n.innerHTML)},u=function(){function i(e){return $("link.menu-list").attr(e)}var o=document.createElement("div");o.id="viewer",o.className="hide",e=document.getElementById("js-tagcloud"),t=document.getElementById("js-aboutme"),n=document.getElementById("js-friends");var s=e?'<span class="viewer-title">'+i("tags")+'</span><div class="viewer-div tagcloud" id="js-mobile-tagcloud"></div>':"",d=n?'<span class="viewer-title">'+i("friends")+'</span><div class="viewer-div friends" id="js-mobile-friends"></div>':"",a=t?'<span class="viewer-title">'+i("about")+'</span><div class="viewer-div aboutme" id="js-mobile-aboutme"></div>':"";o.innerHTML='<div id="viewer-box">        <div class="viewer-box-l">            <div class="viewer-box-wrap">'+a+d+s+'</div>        </div>        <div class="viewer-box-r"></div>        </div>',document.getElementsByTagName("body")[0].appendChild(o);var c=document.getElementById("viewer-box");r=c,c.style.height=document.body.scrollHeight+"px"},m=function(e,t){document.getElementById("viewer").className="",setTimeout(function(){r.className="anm-swipe"},0),a=!0,document.ontouchstart=function(e){if("A"!=e.target.tagName)return!1}},v=function(){document.getElementById("viewer-box").className="",a=!1,document.ontouchstart=function(){return!0}},f=function(){for(var e=navigator.userAgent,t=["Android","iPhone","Windows Phone","iPad"],n=!0,i=0;i<t.length;i++)if(-1!=e.indexOf(t[i])){n=!1;break}return n},h=function(){document.getElementById("viewer-box").addEventListener("webkitTransitionEnd",function(){0==a&&(document.getElementById("viewer").className="hide",a=!0)},!1),i.addEventListener("touchend",function(){m()},!1);var e,t,n=document.getElementsByClassName("viewer-box-r")[0];n.addEventListener("touchstart",function(){e=+new Date},!1),n.addEventListener("touchend",function(){(t=+new Date)-e<300&&v(),e=0,t=0},!1),f()&&($(".slider-trigger").click(function(){m()}),$(".viewer-box-r").click(function(){v()}));var o=$("#mobile-nav .overlay"),s=$(".js-mobile-header");window.onscroll=function(){var e=document.documentElement.scrollTop+document.body.scrollTop;e>=69?o.addClass("fixed"):o.removeClass("fixed"),e>=160?s.removeClass("hide").addClass("fixed"):s.addClass("hide").removeClass("fixed")},s[0].addEventListener("touchstart",function(){$("html, body").animate({scrollTop:0},"slow")},!1)};if(yiliaConfig.search)require([yiliaConfig.rootUrl+"js/search.js"],function(){var e=document.querySelector("#local-search-inputs"),t=$("#toc, #tocButton, .post-list, #post-nav-button a:nth-child(2)"),n=$("#mobile-nav #search-form .fa-times"),i=$("#local-search-results"),o=function(){var e=yiliaConfig.rootUrl+"search.xml";searchFunc(e,"local-search-inputs","local-search-results")},s=e.getAttribute("searchonload");yiliaConfig.search&&"true"===s?o():e.onfocus=function(){o()};var d=function(){t.css("visibility","hidden"),n.show()};e.oninput=function(){d()},e.onkeydown=function(){if(13==event.keyCode)return!1},resetSearch=function(){t.css("visibility","initial"),i.html(""),document.querySelector("#mobile-nav #search-form").reset(),n.hide(),$("#mobile-nav .no-result").hide()},i.bind("DOMNodeRemoved DOMNodeInserted",function(e){$(e.target).text()?$("#mobile-nav .no-result").hide():$("#mobile-nav .no-result").show(200)})});return{init:function(){i=document.getElementsByClassName("slider-trigger")[0],c(),u(),l(),h(),resetTags()}}});